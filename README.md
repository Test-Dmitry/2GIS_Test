## Задание
Имеется сервис для хранения избранных мест пользователей. 
Сервис предоставляет REST API, который доступен по адресу https://regions-
test.2gis.com/<br>
Для создания избранного места необходимо отправить POST-запрос. В теле
запроса нужно передать обязательные параметры: title, lat и lon. Также
можно передать необязательный параметр color. 

## Параметры запроса:
| Поле  | Обязательное | Тип    | Описание |
|-------|--------------|--------|----------|
| title | Да           | string | Название места, 1–999 символов, кириллица, латиница, цифры, знаки препинания |
| lat   | Да           | float  | Широта места |
| lon   | Да           | float  | Долгота места |
| color | Нет          | string | Цвет иконки места: BLUE, GREEN, RED, YELLOW |

### Аутентификация:

- Cookie: `token`  
- Токен генерируется через `POST /v1/auth/tokens`  
- Время жизни токена: 2000 мс

---

## 2. Задание 1: Тестирование и баг-репорт

### 2.1 Тест-кейсы
Тест-кейсы реализованы в [Test IT](./Тест-кейсы_TestIT.pdf). Основные проверки:
- Создание места с обязательными полями (`title`, `lat`, `lon`)
- Создание с разными значениями `color`
- Проверка границ `lat` и `lon`
- Проверка длины и содержания `title`
- Проверка обработки некорректных значений (пустое поле, спецсимволы, неверный цвет)

### 2.2 Коллекция Postman

- Все тест-кейсы перенесены в коллекцию Postman  
- Коллекция сохранена в JSON-файл: [PostmanCollection.json](./Postman/2ГИС.postman_collection.json)
- Результаты запуска тестов сохранены в файлах [Smoke+Позитивные](./Postman/Smoke+позитивные) и [Негативные](./Postman/Негативные)

### 2.3 Баг-репорт

По итогам тестирования выявлены следующие проблемы:
- Некорректная валидация длины и содержимого поля title.
- Отсутствие проверки регистра в параметре color.
- Игнорирование неизвестных параметров запроса.
- Возможность создания записей со специальными символами в названии.
- Недостаточный срок жизни токена для стабильного проведения тестов.

> Полный баг-репорт в файле: [Баг-репорт.md](./Баг-репорт.md)

---

## 3. Задание 2: Автотесты на Java

- Использован **JUnit 5** + **RestAssured**  
- Тесты покрывают **Smoke, позитивные и негативные сценарии**  
- Автообновление токена при протухании  
- Тесты для `application/x-www-form-urlencoded`  
- Проверка `status code` реализована для всех случаев  
- Тесты находятся в [APITests.java](./API_tests/src/test/java/APITests.java)

### 3.1 Структура автотестов

| Тип теста | Кол-во тестов | Основные проверки |
|-----------|---------------|-----------------|
| Smoke | 3  | Создание без цвета, с цветом, проверка 401 при отсутствии токена |
| Позитивные | 13 | Корректные значения title, lat/lon, цвета |
| Негативные | 18 | Пустые поля, неверный цвет, превышение длины, неверные координаты, лишние параметры |

### 3.2 Пример автотеста

```java
@Test
@DisplayName("2. Smoke: Создание избранного с цветом RED")
void createFavoriteWithColor() {
    String[][] params = {{"title","Централка"},{"lat","89.09"},{"lon","98.08"},{"color","RED"}};
    postWithTokenFormParams(params).then().statusCode(200);
}
```
Проверка тела ответа с кириллицей временно не реализована из-за проблем с кодировкой

## 4. Результаты и выводы

- Основные сценарии реализованы и покрыты автотестами
- Сервис корректно обрабатывает валидные данные
- Обнаружены баги при работе с кириллицей и числовыми полями
- Автотесты можно запускать как Smoke, позитивные и негативные наборы

## 5. Приложения

- [Тест-кейсы_TestIT](./Тест-кейсы_TestIT.pdf)
 — описание тест-кейсов
- [Postman-коллекция](./Postman)
 — коллекция с результатами запуска тестов 
- [APITests](./API_tests/)
 — структура проекта с автотестами на Java
- [Баг-репорт.md](./Баг-репорт.md)
 — баг-репорт

 