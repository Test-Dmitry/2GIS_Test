# Баг-репорт сервиса по созданию избранных мест у пользователей методом POST https://regions/test.2gis.com/v1/favorites

## 1. Система принимает `title` > 999 символов
**Описание:**  
Система позволяет создать избранное место с `title`, содержащим более 999 символов, хотя документация ограничивает длину 999 символами.  
**Шаги воспроизведения:**
1. Выбрать коллекцию “2ГИС”
2. Создать новый POST-запрос в коллекции c названием “Параметр title > 999 символов”
3. В запросе выбрать вкладку “Body”
4. Во вкладке выбрать формат ввода данных “x-www-form-urlencoded“
5. "Ввести значения:
  title = Fff…ff (всего 1000 символов)
  lat = 55.05
  lon = 88.08"
6. Нажать на кнопку “Send”
7. Проверить код ответа
8. Проверить сообщение в теле ответа

**Ожидаемый результат:**  
Сервер возвращает ошибку валидации, статус код - 400 Bad request, объект не создаётся.  
**Фактический результат:**  
Объект создаётся успешно, статус код - 200 ОК
**Приоритет:** Средний  

---

## 2. Система принимает `title` с одним пробелом
**Описание:**  
Система позволяет создать избранное место с `title`, содержащим только пробел.  
**Шаги воспроизведения:**  
1. Выбрать коллекцию “2ГИС”
2. Создать новый POST-запрос в коллекции c названием “Параметр title из одного пробела”
3. В запросе выбрать вкладку “Body”
4. Во вкладке выбрать формат ввода данных “x-www-form-urlencoded“
5. "Ввести значения:
 title = _(пробел)
 lat = 55.05
 lon = 88.08"
6. Нажать на кнопку “Send”
7. Проверить код ответа
8. Проверить сообщение в теле ответа

**Ожидаемый результат:**  
Сервер возвращает ошибку валидации, статус код - 400 Bad request, объект не создаётся.  
**Фактический результат:**  
Объект создаётся успешно, статус код - 200 ОК, `title` = " ".  
**Приоритет:** Средний  

---

## 3. Система принимает `color` в нижнем регистре

**Описание:**  
Система принимает значения `color` в нижнем регистре (`blue`, `green` и т.д.), в документации допустимые значения указаны, как — `BLUE`, `GREEN`, `RED`, `YELLOW`.  
**Шаги воспроизведения:**  
1. Выбрать коллекцию “2ГИС”
2. Создать новый POST-запрос в коллекции c названием “Цвет в нижнем регистре”
3. В запросе выбрать вкладку “Body”
4. Во вкладке выбрать формат ввода данных “x-www-form-urlencoded“
5. "Ввести значения:
 title = Freeman’s
 lat = 45.05
 lon = 78.08
 color = red"
6. Нажать на кнопку “Send”
7. Проверить код ответа
8. Проверить тело ответа

**Ожидаемый результат:**  
Сервер возвращает ошибку валидации, статус код - 400 Bad request, объект не создаётся. Или приведение к верхнему регистру.  
**Фактический результат:**  
Объект создаётся успешно, статус код - 200 ОК, `color = "red"`.  
**Приоритет:** Низкий  

---

## 4. Система принимает лишние параметры

**Описание:**  
Если в запрос добавить неописанный параметр, система игнорирует его, но не возвращает в теле ответа и не ругается.  
**Шаги воспроизведения:**  
1. Выбрать коллекцию “2ГИС”
2. Создать новый POST-запрос в коллекции c названием “Лишний параметр в запросе”
3. В запросе выбрать вкладку “Body”
4. Во вкладке выбрать формат ввода данных “x-www-form-urlencoded“
5. "Ввести значения:
title = Freeman’s
lat = 45.05
lon = 78.08
color = RED
count = Russia"
6. Нажать на кнопку “Send”
7. Проверить код ответа
8. Проверить тело ответа

**Ожидаемый результат:**  
Ошибка валидации, введен неизвестный параметр, статус код - 400 Bad request 
**Фактический результат:**  
Объект создаётся, лишний параметр не отображается в ответе, статус код - 200 ОК, но может быть отправлен в базу данных. Система может быть чувствительна к XSS-атакам  
**Приоритет:** Высокий  

---

## 5. Система принимает спецсимволы в `title`
**Описание:** 
Cистема позволяет создать избранное место с `title`, содержащим только спецсимволы
**Шаги воспроизведения:**  
1. Выбрать коллекцию “2ГИС”
2. Создать новый POST-запрос в коллекции c названием “Параметр title из одного пробела”
3. В запросе выбрать вкладку “Body”
4. Во вкладке выбрать формат ввода данных “x-www-form-urlencoded“
5. "Ввести значения:
 title = !@&^
 lat = 55.05
 lon = 88.08"
6. Нажать на кнопку “Send”
7. Проверить код ответа
8. Проверить сообщение в теле ответа

**Ожидаемый результат:**  
Сервер возвращает ошибку валидации, статус код - 400 Bad request, объект не создаётся.  
**Фактический результат:**  
Объект создаётся успешно, статус код - 200 ОК, `title` = "!@&^".  
**Приоритет:** Средний  

---

## 6. Токен живёт слишком мало для некоторых запросов

**Описание:**  
Срок жизни токена 2000 мс (2 секунды). При тестировании нескольких последовательных запросов один запрос не успел выполниться до протухания токена → 401 Unauthorized.  

**Шаги воспроизведения:**  
1. Получить токен через POST `/v1/auth/tokens`.  
2. Отправить несколько POST `/v1/favorites` с интервалом, превышающим 2 секунды.  

**Ожидаемый результат:**  
Все запросы успешно проходят.  
**Фактический результат:**  
Некоторые запросы падают с 401.
**Приоритет:** Низкий (т.к. документировано)  

---

## Примечание:
Баги 1–3 относятся к валидации полей, баг 4 — к обработке лишних параметров, баг 5 — неудобство тестирования с коротким токеном.
